---
title: "11:33:16 AM - October 20, 2025"
date: 2025-10-19T22:33:16.567Z
timestamp: 1760913196567
---

## Project Notes

**Blurhash Investigation - Root Cause Found**

The blurhash generation code was partially implemented and then removed/broken:

**Timeline:**
1. Oct 8, 2025: Blurhash generation WAS added to video_event_publisher.dart with timeout wrappers
2. Sometime after: The code was removed from video_event_publisher.dart
3. Current state: BlurhashService.generateBlurhash() just logs warning and returns null

**Evidence:**
- Journal entry from 2025-10-08/09-44-22 shows code that extracted thumbnail and generated blurhash
- Current video_event_publisher.dart (lines 188-235) builds imeta tag but doesn't generate blurhash
- BlurhashService.generateBlurhash() at line 18-36 is not implemented - just returns null with warning
- Test at test/services/blurhash_service_test.dart:7-16 expects it to work but it doesn't

**What needs to be fixed:**
1. Implement BlurhashService.generateBlurhash() using blurhash_dart library's encode() method
2. Re-add blurhash generation to video_event_publisher.dart publishDirectUpload()
3. Add blurhash to imeta tag components
4. Fix compilation error: remove _runAutoDiagnostics call at video_event_service.dart:671

**Architecture:**
- BlurhashService should encode image bytes -> blurhash string
- VideoEventPublisher should extract thumbnail -> generate blurhash -> include in imeta tag
- Need timeout wrappers to prevent hangs (10s for thumbnail, 3s for blurhash)
